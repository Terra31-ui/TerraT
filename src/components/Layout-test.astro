---
import '../styles/global.css';

export interface Props {
  title?: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{title ? `${title} - TerraTAC` : 'TerraTAC - All Your Tactical Gear Needs'}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Professional tactical gear supplier in the UK. Quality equipment for law enforcement, security, and outdoor professionals." />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@400;700&family=Oswald:wght@400;700&family=Russo+One&family=Orbitron:wght@700&family=Audiowide&display=swap" rel="stylesheet">
  </head>
  
  <body class="min-h-screen flex flex-col bg-gray-50 overflow-x-hidden" style="font-family: 'Montserrat', Arial, sans-serif;">
    <header class="bg-gradient-to-r from-blue-500 via-blue-300 to-red-500 shadow-lg p-4 sm:p-6 flex flex-col sm:flex-row items-center justify-between sticky top-0 z-50 border-b border-gray-200 w-full">
      <div class="flex flex-col sm:flex-row items-center gap-4 sm:gap-10 w-full sm:w-auto">
        <img
          src="/favicon.svg"
          alt="TerraTAC Logo"
          class="h-16 w-16 sm:h-24 sm:w-auto hover:scale-105 transition-transform duration-200"
          loading="lazy"
        />
        <h1 class="text-4xl sm:text-6xl font-extrabold text-gray-800 tracking-widest drop-shadow-lg text-center sm:text-left" style="font-family: 'Audiowide', 'Orbitron', 'Russo One', 'Montserrat', Arial, sans-serif; letter-spacing: 0.08em;">
          TerraTAC
        </h1>
      </div>
      <div class="flex items-center mt-4 sm:mt-0 w-full sm:w-auto justify-center">
        <div style="padding: 0.5rem 1rem; border-radius: 0.75rem; border: 1px solid #3b82f6; min-width: 120px; min-height: 40px; display: flex; align-items: center; justify-content: center; max-width: 180px; margin: 0 auto; background: #fff;">
          <span style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 36" width="48" height="28" aria-label="UK Flag">
              <rect width="60" height="36" fill="#00247d"/>
              <polygon points="0,0 60,36 60,30 12,0" fill="#fff"/>
              <polygon points="60,0 0,36 0,30 48,0" fill="#fff"/>
              <polygon points="0,0 60,36 54,36 0,6" fill="#cf142b"/>
              <polygon points="60,0 0,36 6,36 60,6" fill="#cf142b"/>
              <rect x="25" width="10" height="36" fill="#fff"/>
              <rect y="13" width="60" height="10" fill="#fff"/>
              <rect x="27" width="6" height="36" fill="#cf142b"/>
              <rect y="15" width="60" height="6" fill="#cf142b"/>
            </svg>
          </span>
        </div>
      </div>
      <nav class="space-x-4 sm:space-x-8 flex items-center mt-4 sm:mt-0 w-full sm:w-auto justify-center">
        <a href="/cart" class="text-base font-bold bg-black text-blue-400 px-3 py-1 rounded-lg shadow tracking-wide border border-black hover:bg-blue-900 hover:text-white transition-all duration-200 relative" style="letter-spacing: 0.08em;">
          VIEW CART
          <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full px-1 py-0.5 hidden"></span>
        </a>
      </nav>
    </header>
    
    <main class="flex-1 bg-gradient-to-br from-white via-gray-50 to-blue-50 w-full overflow-x-hidden">
      <slot />
    </main>
    
    <footer class="bg-gray-800 text-white text-center py-8 mt-4 border-t border-gray-700">
      <div class="max-w-4xl mx-auto px-4">
        <div class="flex justify-center space-x-8 mb-4">
          <a href="/cart" class="hover:text-blue-400">Cart</a>
        </div>
        <div class="flex justify-center space-x-4 mb-4">
          <a href="#" aria-label="Twitter" name="twitter" class="hover:text-blue-400"><svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557a9.93 9.93 0 0 1-2.828.775 4.932 4.932 0 0 0 2.165-2.724c-.951.564-2.005.974-3.127 1.195a4.92 4.92 0 0 0-8.384 4.482C7.691 8.095 4.066 6.13 1.64 3.161c-.542.929-.856 2.01-.857 3.17 0 2.188 1.115 4.116 2.823 5.247a4.904 4.904 0 0 1-2.229-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.936 4.936 0 0 1-2.224.084c.627 1.956 2.444 3.377 4.6 3.417A9.867 9.867 0 0 1 0 21.543a13.94 13.94 0 0 0 7.548 2.209c9.058 0 14.009-7.513 14.009-14.009 0-.213-.005-.425-.014-.636A10.012 10.012 0 0 0 24 4.557z"/></svg></a>
          <a href="#" aria-label="Facebook" name="facebook" class="hover:text-blue-400"><svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M22.675 0h-21.35C.597 0 0 .597 0 1.326v21.348C0 23.403.597 24 1.326 24h11.495v-9.294H9.691v-3.622h3.13V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116c.729 0 1.326-.597 1.326-1.326V1.326C24 .597 23.403 0 22.675 0"/></svg></a>
          <a href="#" aria-label="Instagram" name="instagram" class="hover:text-blue-400"><svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.334 3.608 1.308.974.974 1.246 2.241 1.308 3.608.058 1.266.069 1.646.069 4.85s-.012 3.584-.07 4.85c-.062 1.366-.334 2.633-1.308 3.608-.974.974-2.241 1.246-3.608 1.308-1.266.058-1.646.069-4.85.069s-3.584-.012-4.85-.07c-1.366-.062-2.633-.334-3.608-1.308-.974-.974-1.246-2.241-1.308-3.608C2.175 15.647 2.163 15.267 2.163 12s.012-3.584.07-4.85c.062-1.366.334-2.633 1.308-3.608C4.515 2.497 5.782 2.225 7.148 2.163 8.414 2.105 8.794 2.094 12 2.094m0-2.163C8.741 0 8.332.012 7.052.07 5.771.128 4.659.334 3.678 1.315c-.98.98-1.187 2.092-1.245 3.373C2.012 8.332 2 8.741 2 12c0 3.259.012 3.668.07 4.948.058 1.281.265 2.393 1.245 3.373.98.98 2.092 1.187 3.373 1.245C8.332 23.988 8.741 24 12 24s3.668-.012 4.948-.07c1.281-.058 2.393-.265 3.373-1.245.98-.98 1.187-2.092 1.245-3.373.058-1.28.07-1.689.07-4.948 0-3.259-.012-3.668-.07-4.948-.058-1.281-.265-2.393-1.245-3.373-.98-.98-2.092-1.187-3.373-1.245C15.668.012 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998zm7.2-11.162a1.44 1.44 0 1 0 0 2.88 1.44 1.44 0 0 0 0-2.88z"/></svg></a>
        </div>
        <p class="text-sm text-gray-400">&copy; 2025 TerraTAC. All rights reserved.<br>
          <span class="text-blue-300">Contact: <a href="mailto:admin@terratac.co.uk" class="underline hover:text-blue-400">admin@terratac.co.uk</a></span>
        </p>
        <div class="flex justify-center mt-4">
          <iframe width="380" height="38" style="border:0;" src="https://climate.stripe.com/badge/ZFqJ9k?theme=light&size=small&locale=en-US"></iframe>
        </div>
      </div>
    </footer>
    
    <script>
      function updateCartCounter() {
        let cartRaw = localStorage.getItem('cart');
        let cart = [];
        try {
          cart = cartRaw ? JSON.parse(cartRaw) : [];
        } catch (e) {
          cart = [];
        }
        const counter = document.getElementById('cart-count');
        if (!counter) return;
        if (Array.isArray(cart) && cart.length > 0) {
          const totalItems = cart.reduce((sum, item) => {
            return sum + (item && item.qty ? item.qty : 0);
          }, 0);
          counter.textContent = totalItems;
          counter.classList.remove('hidden');
        } else {
          counter.classList.add('hidden');
        }
      }
      window.addEventListener('cartUpdated', updateCartCounter);
      document.addEventListener('DOMContentLoaded', updateCartCounter);
    </script>
  </body>
</html>
